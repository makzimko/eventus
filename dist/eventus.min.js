!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Eventus=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function Eventus(options){options=options||{},this._cid=++_proto.counter,this._events={},this._listening={},this._parent=null,this._child=[],assignOptions(this,options),_proto.trigger.call(this,"init",options)}function assignOptions(obj,options){for(var attrs=Object.keys(options),i=0;i<attrs.length;i++){var key=attrs[i];switch(key){case"events":for(var events=Object.keys(options[key]),j=0;j<events.length;j++)_proto.on.call(obj,events[j],options[key][events[j]]);break;case"_block":for(var blockedMethods=options[key],j=0;j<blockedMethods.length;j++)obj[blockedMethods[j]]=throwError(blockedMethods[j]);break;default:obj[key]=options[key]}}}function throwError(name){return function(){throw new Error("Can't call blocked method "+name)}}var _proto;Eventus.prototype={counter:0},Eventus.prototype.on=function(name,callback){this._events[name]=this._events[name]||[],this._events[name].push(callback)},Eventus.prototype.once=function(name,callback){var self=this;_proto.on.call(this,name,function once(data){callback.call(self,data),_proto.off.call(self,name,once)})},Eventus.prototype.off=function(name,callback){if(name){if(this._events[name])if(callback){var index=this._events[name].indexOf(callback);index>=0&&this._events[name].splice(index,1),0===this._events[name].length&&(this._events[name]=void 0)}else this._events[name]=void 0}else this._events={}},Eventus.prototype.trigger=function(name,data){var listeners=this._events[name],args=Array.prototype.splice.call(arguments,1);if(listeners)for(var i=0;i<listeners.length;i++)listeners[i].apply(this,args)},Eventus.prototype.createChild=function(name,options){if(!name)throw new Error("Argument name is required");if(this[name])throw new Error("Child element with name "+name+" already exists");var newObj=new this.constructor(options);return newObj._parent=this,this._child.push({name:name,instance:newObj}),this[name]=newObj,_proto.trigger.call(this,"child:add",name,newObj),newObj},Eventus.prototype.removeChild=function(element){for(var option="string"==typeof element?"name":"instance",i=0;i<this._child.length;i++)if(this._child[i][option]==element){var obj=this._child[i];delete this[obj.name],this._child.splice(i,1),_proto.trigger.call(this,"child:remove",obj.name,obj.instance),_proto.destroy.call(obj.instance)}},Eventus.prototype.destroy=function(){if(this._child.length)for(var i=0;i<this._child.length;i++)_proto.removeChild.call(this,this._child[i].name);_proto.trigger.call(this,"destroy"),_proto.off.call(this)},Eventus.prototype.emit=function(name,data,beginner){beginner?_proto.trigger.call(this,name,data,beginner):beginner=this,this._parent&&_proto.emit.call(this._parent,name,data,beginner)},Eventus.prototype.broadcast=function(name,data,beginner){if(beginner?_proto.trigger.call(this,name,data,beginner):beginner=this,this._child.length)for(var i=0;i<this._child.length;i++)_proto.broadcast.call(this._child[i].instance,name,data,beginner)},Eventus.prototype.constructor=Eventus,_proto=Eventus.prototype,module.exports=Eventus},{}],2:[function(require,module,exports){var Eventus=require("./eventus");require("./modules/observer")(Eventus),require("./modules/radio")(Eventus);var info=require("./package.json");Eventus.version=info.version,Eventus.author=info.author,Eventus.homepage=info.homepage,module.exports=Eventus},{"./eventus":1,"./modules/observer":3,"./modules/radio":4,"./package.json":5}],3:[function(require,module,exports){function init(Eventus){_proto=Eventus.prototype,Eventus.prototype.listen=listen,Eventus.prototype.unlisten=unlisten,Eventus.prototype._destroyListening=_destroyListening,Eventus.prototype._emitterDestroyer=_emitterDestroyer}function bindDestroyer(obj){for(var events=obj._events.destroy||[],i=0;i<events.length;i++)if(events[i]==_destroyListenings)return;_proto.on.call(obj,"destroy",obj._destroyListening)}var _proto,listen=function(obj,name,callback){function listen(){var data=Array.prototype.slice.call(arguments);data.unshift(obj),callback.apply(this,data)}if(obj&&obj.on){var listeners;this._listening[obj._cid]?listeners=this._listening[obj._cid]:(listeners={destroy:[],_obj:obj},listeners.destroy.push({callback:this._emitterDestroyer.bind(this,obj._cid),original:this._emitterDestroyer.bind(this,obj._cid)}),_proto.on.call(obj,"destroy",listeners.destroy[0].callback)),listeners[name]=listeners[name]||[],_proto.on.call(obj,name,listen),listeners[name].push({callback:listen,original:callback}),this._listening[obj._cid]=listeners,bindDestroyer(this)}},unlisten=function(obj,name,callback){if(obj&&obj.off){var listeners=this._listening[obj._cid]||{};if(listeners[name]=listeners[name]||[],name&&callback){var index=-1;for(i=0;i<listeners[name].length;i++)listeners[name][i].original==callback&&(index=i);_proto.off.call(obj,name,listeners[name][index].callback),index>=0&&listeners[name].splice(index,1),0===listeners[name].length&&(listeners[name]=void 0)}else if(name){var events=Object.keys(listeners[name]);for(i=0;i<events.length;i++)_proto.off.call(obj,name,listeners[name][events[i]].callback);listeners[name]=void 0}else{var events=Object.keys(listeners);for(i=0;i<events.length;i++)for(j=0;j<listeners[events[i]].length;j++)_proto.off.call(obj,events[i],listeners[events[i]][j].callback);listeners=void 0}this._listening[obj._cid]=listeners}},_emitterDestroyer=function(cid){this._listening[cid]=void 0},_destroyListening=function(){for(var listening=this._listening,objects=Object.keys(listening),i=0;i<objects.length;i++)_proto.unlisten.call(this,listening[objects[i]]._obj)};module.exports=init},{}],4:[function(require,module,exports){function init(Eventus){_proto=Eventus.prototype,Eventus.Radio=new Eventus(RadioPrototype),Eventus.prototype.subscribe=subscribe,Eventus.prototype.unsubscribe=unsubscribe}var _proto,ChannelPrototype={_block:["on","once","off","createChild","removeChild"]};ChannelPrototype.trigger=function(name,data){var listeners=this._events.radio,args=Array.prototype.slice.call(arguments);if(listeners)for(var i=0;i<listeners.length;i++)listeners[i].apply(this,args)},ChannelPrototype.reply=function(name,callback){if(this._replies=this._replies||{},this._replies[name])throw new Error("Reply with name "+name+" already exists");this._replies[name]=callback},ChannelPrototype.request=function(name){var args=Array.prototype.splice.call(arguments,1);return(this._replies&&this._replies[name]||Function).apply(name,args)};var RadioPrototype={_block:["on","once","off","createChild","removeChild","trigger"]};RadioPrototype.channel=function(name){var channel=this[name];if(channel&&channel instanceof this.constructor==!1)throw new Error("Cant get channel "+name+". Name is reserved");return channel||(this[name]=channel=_proto.createChild.call(this,name,ChannelPrototype)),channel};var subscribe=function(channelName,callback){var channel=this.constructor.Radio.channel(channelName);this.listen(channel,"radio",callback)},unsubscribe=function(channelName){var channel=this.constructor.Radio.channel(channelName);this.unlisten(channel)};module.exports=init},{}],5:[function(require,module,exports){module.exports={name:"eventus",version:"0.1.1",description:"Eventful object that can everything",keywords:["event","object","emit","broadcast","listener"],homepage:"https://github.com/makzimko/eventus",license:"MIT",author:{name:"Maxim Tkachuk",email:"uakorn@gmail.com",url:"http://makzimko.info"},main:"index.js",scripts:{test:"jasmine",build:"jasmine && npm run concat && npm run compress",concat:"browserify index.js > dist/eventus.js -s Eventus",compress:"uglifyjs dist/eventus.js > dist/eventus.min.js --compress --source-map dist/eventus.js.map"},devDependencies:{"backpack-core":"^0.2.0",browserify:"^14.1.0",jasmine:"^2.5.3","uglify-js":"^2.8.5"}}},{}]},{},[2])(2)});
//# sourceMappingURL=dist/eventus.js.map
